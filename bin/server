#!/usr/bin/env ruby
require 'pathname'
require 'fileutils'
include FileUtils

# path to your application root.
APP_ROOT = Pathname.new File.expand_path('../../', __FILE__)

def system!(*args)
  system(*args) || abort("\n== Command #{args} failed ==")
end

chdir APP_ROOT do
  # This script is a starting the server to show up your application.
  # It uses livereload, so you don't need to stop it manually.

  puts '== Running server =='
  system!('cp _data/home/home.md _data/home/home.yml')
  system!('cp _data/developers/developers.md _data/developers/developers.yml')
  system!('cp _data/agentinbox/agentinbox.md _data/agentinbox/agentinbox.yml')
  system!('cp _data/openapply/openapply.md _data/openapply/openapply.yml')
  system!('bundle exec jekyll s --livereload')
end
